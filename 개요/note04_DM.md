# 개요4. 실제 현업 적용 사례 - 제조
- 제조 Domain에서 이뤄지는 이상 탐지 실제 사례 스터디

</br>

## 1. 설비 이상 탐지

- 문제 정의
  - 설비가 고장나기 전에 이상증세를 탐지하고, 점검을 통해 고장 예방 및 risk 감소

- 기대효과
  - 주요 공정 변수 모니터링 전/후 **생산량** 및 **Line stop 횟수** 비교
  - 궁극적으로 생산량 증가, Line stop 횟수 감소를 통해 공장의 생산계획을 지키는데 도움

- 프로세스

  1) 센서 데이터 수집
      </br>
      - 데이터가 수집되는 원천 DB 확인 (공정이 다양한만큼 DB도 여러개, 접근방식 및 tool도 다르므로 시간 소요됨)
      - 분석 Server로의 데이터 수집 방법 설정 (SFTP, FTP 등)
      - 데이터 실시간 수집 주기 설정 (1초, 3초, 10초, 1분, ...)
      - 실시간 수집 체계 구축은 오래 걸리므로, 그 전까지는 Dump 형태 데이터로 poc형태의 분석을 진행함 (지난 1년치 데이터 EDA 등)
  
  2) 이상 증상 정의
      </br>
      - 고장나기 전 나타나는 사전 이상증상을 정의
          - 현업 의견 및 Domain 지식을 활용한 기준(중요)
          - 고장 전 센서데이터의 시계열 Trend를 분석하여 만든 데이터 기반의 기준
      - 고장나기 전 수집되는 알람코드를 활용하는 것도 가능
  
  3) 예측 모델링
      </br>
      - label이 존재하는 경우가 많음
      - Binary Classification(이진분류) 모델 활용. 다양한 Tree 계열 알고리즘
 
  4) 성능 평가 및 현장 적용
      - 중요인자 관리를 위한 **모니터링 시스템** 구축 (기대효과 달성을 위한 Output)
      - 고장 발생을 막기 위함이므로 성능 평가는 Recall에 초점
      - 현장 운영사항을 세세하게 준비해야 함

- 실제 프로젝트 사례
  - 공조시스템(SAC, Chiller) 이상 탐지 >> 병원, 수영장 등 risk 높음
  - 검사 장비 측정값 틀어짐 이상 탐지 >> 정상제품도 불량으로 판별 위험
  - 북미 Smart Factory 자동화 설비 이상 탐지 >> 사람이 없는 현장의 risk 관리
  - 반도체 생산 설비 이상 전조 탐지 >> 센서 데이터의 비정상적 패턴을 탐지, 탐지한 시점부터 고장까지 남은 시간을 추정해 예지 정비 (SKR - EV 차량 예지 정비 활용 가능)   
    - [마키나락스 사 적용 사례: 반도체 생산 설비 이상 전조 탐지](https://www.makinarocks.ai/use-case/%EB%B0%98%EB%8F%84%EC%B2%B4-%EA%B3%B5%EC%A0%95-%EC%9E%A5%EB%B9%84%EC%9D%98-%EC%98%88%EC%A7%80-%EC%A0%95%EB%B9%84/)
  

 </br>
 
 ## 2. 품질 주요 인자 이상 탐지 모니터링
 
- 문제 정의
  - 기대하던 스펙의 제품이 정상적으로 생산되지 않는 원인을 찾아 notify

- 기대효과
  - 주요 공정 변수 모니터링 전/후 **생산량**, **불량률**, **폐기비용** 비교
  - 궁극적으로 생산량 증가, 불량률 감소, 폐기비용 감소 달성

- 프로세스

  1) 데이터 수집 (상동)
      </br>
      - 데이터가 수집되는 원천 DB 확인
      - 분석 Server로의 데이터 수집 방법 설정
      - 데이터 실시간 수집 주기 설정
      - 실시간 수집 체계 구축까지는 Dump 형태 데이터로 poc형태의 분석을 진행함
  
  2) 예측 모델링
      </br>
      - ML 활용한 예측 모델링
          - 생산품 무게/성능 등 연속형 Target은 회귀 계열
          - 생산품의 양품or불량품 여부 등 범주형 Target은 분류 계열
  
  3) 중요인자 도출
      </br>
      - 모델링 완료 후 회귀계수, Featrue Importance 등 활용한 중요인자 도출
      - 중요인자에 대해서는 Scatter plot 등을 활용해 **현업에게 모델의 설명력을 보여주고 설득할 수 있어야 함**
 
  4) 현장 적용 (모니터링 시스템)
      - 중요인자 관리를 위한 모니터링
      - 모니터링시 Scatter plot, Box plot, Histogram 등 심플한 그래프를 활용해 현업이 이해하기 쉽도록 하는 것도 중요
      - 이후 현장 운영체계 구축 (모니터링상 특정 수치를 넘어갈 시 경고를 전송하는 등)

- 실제 프로젝트 사례
  - 2차 전지 충전 효율 품질 주요 인자 도출 및 탐지


