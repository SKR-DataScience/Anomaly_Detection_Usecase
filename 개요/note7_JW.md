# 개요7. 이상탐지 문제해결 프로세스
- 현업에서 이상 탐지 문제를 해결하는 접근 방법
- **이상탐지의 목적은 이상한 것을 사전에 빠르게 찾아내는 것!**
- **이상: 현업에서 문제 해결 관점으로 바라보았을 때, 이상으로 정의한 것**

</br>

## 1. 정상(Normal) 데이터 정의

- 정상 데이터: 도메인별 특별한 이상이 없는 정상적인 데이터. 이상이라고 정의된 것 이외의 데이터
  - 제조: 제품의 명확한 Spec 존재. 그 Spec 안에 위치한 제품이 정상 데이터 
  - 금융: FDS 시스템에 검출되지 않은 일반적인 거래 데이터
  - 게임: 블랙리스트/버그 의심 유저를 제외한 일반 유저들의 플레이 데이터

## 2. 이상(Abnormal) 데이터 정의
- 이상 데이터: 사전에 감지하고 싶은 이상한 데이터
  - 제조: 고장이 발생하기 전 이상을 탐지하는 게 주 목적 -> Spec의 상/하한치에 근접해 있는 제품이 불량일 가능성이 높음
    - 시계열 센서 데이터의 경우 오차범위를 지정하고, 오차 범위 진입 시 이상으로 판단 (n번 진입 시 등)
  - 금융: 스코어링 및 룰 기반 이상 데이터 정의 ex) BC카드 사례
  - 게임: 사전에 탐지된 버그 및 어뷰징 유저의 사용 패턴 
          -> 게임에서는 새로운 버그가 계속 나오므로 Novelty detection 적용해 볼 수도 있을듯 

## 3. 데이터 수집 및 추출 과정 오류 확인
- 데이터 정합성 검증: 수집 및 추출/변환 과정에서 오류가 없었는지 확인
- 데이터 ETL 과정: 추출(Extract), 변환(Transform), 로드(Load) 각 단계별 이슈 확인
  ex) 센서 데이터 수집 과정에서 센서 고장으로 999 값 수집
  ex) 데이터 변환 과정에서 meta data의 예상치 못한 변경으로 인해 raw data가 잘못 변환
  ex) 데이터 수집 서버 shut down 및 점검으로 인한 수집 데이터 공백

## 4. Outlier Detection
- 데이터 Type / 데이터 Label / Train Data
 
  |학습유형|패턴유형|데이터유형|데이터종류|
  |:---|:---|:---|:---|
  | Supervised | Outlier Detection | Univariate Data | Time-series Data |
  | Semi-supervised | Novelty Detection | Multivariate Data | Non-time-series Data|
  | Unsupervised ||||

- 위 판을 보고 해당하는 칸을 색칠해가며 내가 풀어야하는 문제 정의 가능

## 5. 평가 방법 산정
- Scoring 평가: Threshold(임계치)의 수준에 따라 경고 수준 전달 ex) 신호등 -> 0.5~0.6 사이면 옐로카드(인지만), 0.6~0.8 사이면 레드카드(조치까지)
- Prediction 평가: Threshold를 설정하여 이상(1)과 정상(0)을 구분하여 전달
- Threshold(민감도) 설정: 민감도 설정에 따라 탐지하는 이상의 개수와 point가 달라짐 -> 이상탐지의 꽃!
   --> 현업과의 계속적인 커뮤니케이션을 통해 고도화해나가야함
  
## 6. 모니터링 및 대응 프로세스 수립
- 이상 감지를 위한 현업 모니터링 시스템 설계 ex) 대시보드, slack 알람, email 알람 등
- 이상 감지 후 점검하기 위한 현업 action 프로세스 설계 ex) 유선 확인, 전문가 점검, 주요 지표 수치 확인 등
  -> 현업의 입장에서 잘 따라와줄 수 있는 프로세스를 고안해내야 함
- False Alarm(오탐지) 이벤트에 대한 대응체계 마련 
  -> 현업 입장에서 가장 손실이 큰 것: Missed Alarm(이상이었는데 탐지 못함), False Alarm(이상 아닌데 이상이라 함)
- 정상 데이터 패턴 변화에 대응하기 위한 재학습 체계 수립
