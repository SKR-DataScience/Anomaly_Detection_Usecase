# 서버셧다운

> ## 문제 정의
- 사용자 급증 등으로 인해 서버실 장비 온도가 급상승, 온도 급상승으로 인한 서버 셧다운 발생
- 서버의 온도 상승 이상탐지 & 이상이 예상되면 쿨링 시스템 가동


> ## 보유 데이터 & 특징
- 단변량 시계열 데이터
- 시간 별(5분 단위) 서버실 온도 데이터
- 대부분의 stream 이상탐지 데이터와는 달리, 이상 시점 label 존재 $\rightarrow$ 모델 평가 가능
- target: binary(이상 or not)
  - 이상치 비율- 정상(20,427), 이상(2,268)
  - 대략 10% 비율로 이상치를 가짐, 불균형이긴 하지만 못맞출 수준은 아님

> ## 성과 측정
- 모델 활용 전/후 장비 온도, 서버 셧다운 횟수 비교
- 24시간 풀가동 쿨링시스템 운영 비용 vs 이상 예측 시점 한정 쿨링 시스템 가동 비용

> ## 데이터 처리 주의사항
- 학습 기간: 이 문제에서는 1년 학습 vs 2년 학습 중 2년 선택 
  - 강사의 의견은 길게 학습하는 것이 강건한 패턴 학습에 좋다고 함

> ## EDA 결과
- 시점 단위 별 패턴이 다름
  - 연도 별: 온도 분포 차이 미미
  - 월 별: 온도 분포 차이 미미
  - 요일 별: 온도 분포 차이 있음 
    - 월, 토, 일 사용량 많음, 나머지 요일 사용량 비교적 적음
    - 요일 별 가중치가 있는 이상탐지 모델 구축 가능(아이디어)

> ##  알고리즘 선택
- 아래 세 가지 방법 중 RRCF가 가장 성능이 좋지 않음
- 데이터 별 필요한 모델의 복잡도가 다름, 무조건 최신, 복잡한 모델이 잘 맞지는 않음

1. One Class SVM
  - 거리기반 이상탐지는 문맥상의 이상치를 못잡음(ex. 값은 정상 범위이나 이전 값들이 모두 이상)
  - 가짜 알람이 너무 많음
2. Isolation Forest
  - 값의 변화가 두드러지는 급락은 탐지하지만, 급등은 탐지 못함
3. LOF
4. Varianced Based Method: 3 sigma
  - 밀도기반의 이상탐지라 가짜 알람이 너무 많음

> ## 모델 성능 평가
- 불균형 데이터이기 때문에 f1 score를 기준으로 알고리즘 별 성능 비교 

> ## 해당 강의 회차 종합 평가
- 단변량 시계열 데이터의 이상탐지에 대한 접근이 잘못됨
- 해당 강의에서는 단변량 sequnce를 shape이 (sample개수, 1)인 형태로 input을 만들었음(현재 온도값만으로 이상 판별)
  - 어떤 알고리즘을 쓰던 자로 자른듯 특정 값 이상, 이하를 이상으로 여기게 될 수밖에 없음, 또한 현시점의 온도만을 가지고 이상을 판별하므로 사전 탐지 불가
  - 단변량 시계열 데이터라면 다른 추가 변수가 없다면 특정 개수의 과거 값을 input으로 만들수밖에 없음, 꼭 시계열 알고리즘을 쓰지 않더라도 input을 다변량 변수 포맷으로 만들어 이상탐지하는 방법도 있었음